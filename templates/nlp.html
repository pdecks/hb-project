{% extends 'base.html' %}

{% block title %}
PlatePal: Sentiment Analysis
{% endblock%}

{% block head %}

{% endblock %}

{% block location %}
<nav class="navbar navbar-default" role="navigation">
    <div >
        <button type="button" class="citynav navbar-toggle" data-toggle="collapse" data-target="#citynav-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" id="citynav-left">
            <ol class="breadcrumb">
              <li><a href="/analytics#forceregion">Regional</a></li>
              <li><a href="/analytics#treemap">Local</a></li>
              <li><a href="/analytics#area3">Business</a></li>
            </ol>
        </div>
    </div>

    <div class="collapse navbar-collapse" id="citynav-collapse">
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 citynav-right" >
            <ol class="breadcrumb nearby">

            <li><a href="/"></a></li>
            
            </ol>
        </div>
    </div>
</nav> 

<!-- <div class="analytics-outer">
    <h2>Analytics: the ghost in the machine</h2>
    <h3>Data visualization with D3 can be found <a href="/analytics">here</a></h3>
</div>  -->
{% endblock %}

{% block content %}
<style>

</style>

<!-- <div id="area1"></div> -->
<!-- <div id="area2"></div> -->
<script src='http://d3js.org/d3.v3.min.js'></script>
<body>

<div> 
    <article id="motivation">
        <h3>Project Motivation</h3>
        <p>Speaking from personal experience, it can be difficult to dine out safely
        when you have a special dietary need. As someone who cannot eat gluten, I must be careful about where I eat. I was motivated to create PlatePal to make it easier for people like myself to make dining decisions.</p>
        <p>PlatePal is designed to complement exisiting sites like Yelp by providing
        a sentiment score for a restaurant review, evaluating it for a relevant dietary
        category on a scale of 0 to 1, where 0 is bad and 1 is good. The scores are
        generated by performing sentiment analysis on relevant sentences in reviews
        containing keywords in the categories. Currently, PlatePal scores restaurants for
        the following categories: Gluten-Free, Vegan, Kosher, Allergy, and Paleo.</p>
        <h3>Project Objectives</h3>
        <p>Being able to perform the sentiment analysis involved the following:</p>
        <ul>
          <li>Find a large dataset containing relevant restaurant reviews.</li>
          <li>Seed this information into a database.</li>
          <li>Build a document classifier to be able to categorize reviews.</li>
          <li>Build a sentiment analysis classifier to be able to score reviews.</li>
          
          <li>Calculate aggregate scores for businesses.</li>
          <li>Present the information in an intuitive, user-friendly format.</li>
        </ul>
        <p>... easier said than done!</p>
    </article>
    <article id="dataset">
        <h3>Wrangling Data</h3>
          <p>Good data is hard to find, but for my learning purposes, the <a href="https://www.yelp.com/academic_dataset">Yelp Academic Dataset</a> was a great place to start. The dataset contains more than 200,000 reviews for businesses clustered around 30 universities. Even though the dataset contains reviews of many kinds of businesses, 
          not just restaurants, a cursory review of the data indicated that there were enough
          relevant reviews to explore my project's concept. In addition to reviews, the dataset also contains business and user information.
          </p>
          <h4>Working up to Big Data</h4>
          <p>Admittedly, the Yelp dataset was a bit intimidating. The first time I tried to load
          the JSON, the reviews dataset caused my computer to crash. I anticipated that working
          with such a large dataset would be part of the challenge with my project, so I devised
          a plan to test out my components and concepts on smaller datasets and scale up after
          successful testing.</p>
          <h4>Tricia's Plan for Data Sanity</h4>
          <ul>
            <li>Use set of 45 personal reviews to test concepts.</li>
              <ul>
                <li>Create helper functions and scripts to update and sort the reviews.</li>
              </ul>
            <li>Load the Yelp Academic Dataset JSON into a database</li>
              <ul>
                <li>Construct a data model with the flexibility to incorporate data from other sources.</li>
              </ul>
            <li>Use a subset of the relevant Yelp reviews stored as txt files.</li>
            <ul>
              <li>Automate generation of subset files and directories.</li>
              <li>Model the subset directories to allow for use of sklearn's load module.</li>
            </ul>
            <li>Classify documents in the entire dataset in the database.</li>
            <li>Use all reviews in the database ... success!</li>
          </ul>
          <h4>Data Challenges</h4>
          <p>Although there was a large amount of relevant data in the datset, it was not labeled, as least not in a way that I needed it to be. There were two labels that I needed my data to have, as I was essentially classifying each review twice:</p>
          <ol>
            <li>Categorize the review for a dietary need (e.g. "vegan", "unknown").</li>
            <li>Score the "goodness" of the review for each relevant dietary need.</li>
          </ol>
          <h4>Categorizing Reviews</h4>
          <p> To get around hand-labeling reviews in the dataset -- ain't nobody got time for that! -- I created helper functions to find reviews containing simple keywords (e.g., 'gluten-free', 'vegan', 'paleo') then labeled those reviews as belonging to the appropriate category.</p>
          <h4>Scoring "Goodness"</h4>
          <p>It was more difficult to label data for the sentiment analysis classifier, especially because the number of relevant reviews for most of the categories was quite small. I would need 1,000s of reviews to adequately train a sentiment analysis classifier for each category. As a first pass, I tried using the Yelp star ratings as a predicator of goodness, although this violated my fundamental assumption that a review could be good overall but bad for a particular dietary need, or vice versa.</p>
    </article>
    <article id="database">
      <h3>Database Model</h3>
      <figure>
        <img src="/static/img/IMG_4563.jpg" style="height:350px;border: 1px solid black;
        margin-left:10%;">
        <figcaption style="margin-left:10%;">First Pass at a Data Model. Things get much more complicated.</figcaption>
      </figure>
      <br>
      <figure>
        <img src="/static/img/IMG_4602.jpg" style="height:350px;border: 1px solid black;
        margin-left:10%;">
        <figcaption style="margin-left:10%;">Adding Tables for Sentiment Analysis. Many-to-many Relationships Galore!</figcaption>
      </figure>
    </article>
    <article>
      <h3>Text Classification </h3>
          <h4>Preprocessing </h4>
        
          <h4>Extracting Features </h4>
            <h5>Vectorizer Vocabulary</h5>

            <h5>Bag of Words</h5>
            <h5>Word2Vec</h5>
            <h5>KFolds</h5>
              <h6>Author's Reviews: Classification</h6>
              <p>
                <img src="/static/img/k2_toyset.png"><br>
                Author Reviews, K=2
              </p>
              <p>
                <img src="/static/img/k3_toyset.png"><br>
                Author Reviews, K=3
              </p>
              <p>
                <img src="/static/img/k4_toyset.png"><br>
                Author Reviews, K=4
              </p>
              <p>
                <img src="/static/img/k4-10_toyset_subplots.png"><br>
                Author Reviews, K=4-10
              </p>
              <h6>Yelp Academic Dataset: Classification</h6>
              <p>
                <img src="/static/img/k2-10_yelpgltn_onePlot.png"><br>
                ???
              </p>
              <p>
                <img src="/static/img/k2-10_yelpgltn_subplots.png"><br>
                ???
              </p>
              <h6>Yelp Academic Dataset: Sentiment</h6>
              <p>
                <img src="/static/img/sentiment_5-1_gltn_k2-10_onePlot.png"><br>
                ???
              </p>
              <p>
                <img src="/static/img/sentiment_5-1_gltn_k2-10_subPlots.png"><br>
                ???
              </p>
              <p>
                <img src="/static/img/sentiment_gltn_k2-10_onePlot.png"><br>
                ???
              </p>
              <p>
                <img src="/static/img/sentiment_gltn_k2-10_subPlots.png"><br>
                ???
              </p>
              
              


          <h4>Picking a Classifier </h4>
            <h5>MultinomialNB vs. LinearSVC </h5>
          <h4>Sentiment Analysis</h4>
              <h5>Categorization</h5>
              <p> categorizing reviews into one of five categories.
              </p>
              <h5>Single-label classifier </h5>
              <p> each review could only have one category,
               each sentence could only have one category</p>
              

              <h5>Multilabel Classifier </h5>
                <h6>One vs. Rest</h6>
                <h6>KMeans Clustering</h6>

              <h5>Classifying as "good" or "bad"
            
              
            
        <h3> Sentiment Analysis with Python</h3>
          <p>link to lightning talk slides </h3>
    </article>
</div> <!-- content block -->

{% endblock %}

{% block footer %}

{% endblock%}



</body>
</html>
